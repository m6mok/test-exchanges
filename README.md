# Проект Трекер валют
## Описание
Telegram-бот, отслеживающий нужные валюты при помощи API портала https://coinmarketcap.com/ (сокращённо CMC). Обновление данных валют идёт раз в 60 секунд. Если пользователь выставил соответствующие значения, то при переходе через ценовой порог придёт уведомление для каждой валюты.

Инструкция пользования ботом:
```
Тикер - краткое название в биржевой информации (bitcoin - BTC)
Минимальный порог значения валюты - когда валюта опускается ниже поставленного уровня
Максимальный порог значения валюты - когда валюта поднимается выше поставленного уровня

/choose_ticker Добавить валюту к отслеживанию
/untrack_ticker Не отслеживать валюту
/get_choices Показать все текущие отслеживаемые валюты
```

## Требования к запуску
1. Наличие приложения Docker: https://docs.docker.com/engine/install/
2. Наличие приложения Make:
    - Debian/Ubuntu
        ```sh
        apt install make
        ```
    - Fedora/RHEL
        ```sh
        yum install make
        ```
    - Arch/Manjaro
        ```sh
        pacman -S make
        ```
3. (опционально) Для разработки рекомендеутся использовать утилиту UV: https://docs.astral.sh/uv/getting-started/installation/

## Как запустить локально
```sh
# Определение файла виртуального окружения проекта
cp ./env/production/project.env.dev ./env/production/project.env

# Заполнение переменных окружения при помощи текстового редактора
# Подразумевается, что имеются Telegram-токен и CMC-токен
vi ./env/local/project.env

# Короткий запуск docker compose
make up
```

## Как запустить в продакшн
```sh
# Определение файла виртуального окружения проекта
cp ./env/production/.env.dev ./env/production/.env

# Заполнение переменных окружения при помощи текстового редактора
# Подразумевается, что уже запущенн сервис PostgreSQL, и для него имеются соответствующие реквизиты
vi ./env/production/.env

# Короткий запуск docker compose
make prod
```

## Как начать разработку на Python с UV
Разработка велась на операционной системе Ubuntu 24.04, по причине чего используются команды, описанные ниже. Для других операционных систем процесс разработки может вестись иначе.
```sh
# установка Python версии 3.10
uv python install 3.10

# создание виртуального окружения с Python версии 3.10
uv venv -p $(uv python list | grep 3.10 | awk '{print $2}' | head -n 1)

# активация виртуального окружения
source .venv/bin/activate

# установка зависимостей pip
uv pip install -r ./requirements.txt

# для корректной подсветки синтаксиса в IDE следует указать такой путь
export PYTHONPATH=$PWD/bot:PYTHONPATH
```
